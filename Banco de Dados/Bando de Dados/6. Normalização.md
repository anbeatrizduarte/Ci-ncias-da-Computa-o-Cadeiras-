
#### Sobre

Normalização é o processo de organizar os dados em um banco de dados para reduzir ou eliminar redundâncias, evitar anomalias durante inserções ou melhorar a consistência dos dados.

O processo de normalização é dirigido pela informação referente às dependências funcionais e às chaves dos esquemas de tabelas. 

---

#### Dependências funcionais

Uma dependência funcional é uma propriedade semântica dos atributos, e por isso ela é derivada do conhecimento que o projetista do banco de dados tem do mundo real que está sendo modelado.

O principal uso das dependências funcionais é descrever um esquema de tabela de forma mais detalhada, por meio da especificação de restrições em seus atributos que devem ser garantidas todo o tempo.

---

#### Formas Normais

A forma normal de uma tabela é a mais alta forma normal cujas condições são atendidas pela tabela. Considerar apenas as formas normais não garante que o projeto de banco de dados está bom.

Além disso, elas são as etapas da normalização. Cada uma tem um objetivo específico.


##### 1° Forma Normal (1NF)

- Todos os atributos devem ser atômicos (indivisíveis)
- Não pode haver repetição de grupos de dados em uma mesma tupla.

Exemplo (violando a 1NF):

| Aluno_ID | Nome       | Telefones                      |
| -------- | ---------- | ------------------------------ |
| 1        | Ana Souza  | (11)1234-5678, (11)9999-8888\| |
| 2        | Pedro Lima | \|(21)1111-2222\|              |
_Problema: o campo Telefone tem valores múltiplos_

Solução (aplicando 1NF):

| Aluno_ID | Nome       |
| -------- | ---------- |
| 1        | Ana Souza  |
| 2        | Pedro Lima |

| Aluno_ID | Telefones     |
| -------- | ------------- |
| 1        | (11)1234-5678 |
| 1        | (11)9999-8888 |
| 2        | (21)1111-2222 |

___

##### 2ª Forma Normal (2NF)

- Estar na 1NF
- Todos os atributos não-chave devem depender totalmente da chave primária (sem dependência parcial)

Exemplo (violando 2NF):

| Matrícula | Disciplina | Nome_Aluno | Nome_Professor |
| --------- | ---------- | ---------- | -------------- |
| 101       | BD         | Ana        | João           |
| 102       | BD         | Carol      | João           |
| 103       | POO        | Ana        | Carla          |
_Problema: `Nome_Professor` depende apenas de Disciplina, não da chave completa (Matrícula, Disciplina)._

Solução (aplicando 2NF):

**Tabela: Aluno_Disciplina**

| Matrícula | Disciplina |
| --------- | ---------- |
| 101       | BD         |
| 102       | BD         |
| 103       | POO        |

**Tabela: Aluno**

| Matrícula | Nome_Aluno |
| --------- | ---------- |
| 101       | Ana        |
| 102       | Carol      |
| 103       | Ana        |

**Tabela: Aluno**

| Disciplina | Nome_Professor |
| ---------- | -------------- |
| BD         | João           |
| POO        | Carla          |

___

##### 3ª Forma Normal (3NF)

- Estar na 2NF
- Não pode haver dependências transitivas entre atributos não-chave

> Se a -> B e B ->C, então A -> B (dependência transitiva).

Exemplo (violando 3NF):

| CPF            | Nome       | Cod_Departamento | Nome_Departamento |
| -------------- | ---------- | ---------------- | ----------------- |
| 111.111.111-11 | Ana Souza  | D1               | RH                |
| 222.222.222-22 | Pedro Lima | D2               | TI                |
_Problema: `Nome_Departamento` depende de `Cod_Departamento`, que não é chave primária -> dependência transitiva._

Solução (aplicando 3NF):

**Tabela: Funcionário**

|CPF|Nome|Código_Departamento|
|---|---|---|
|111.111.111-11|Ana Souza|D1|
|222.222.222-22|Pedro Lima|D2|

**Tabela: Departamento**

| Código_Departamento | Nome_Departamento |
| ------------------- | ----------------- |
| D1                  | RH                |
| D2                  | TI                |

___

##### Forma Normal de Boyce-Codd (BCNF)

- Estar na 3NF
- Toda determinante (atributo que determina outro) deve ser uma chave candidata

Diferença entre 3NF e BCNF:
- A 3NF permite que um atributo não-chave seja determinante se não houver dependência transitiva
- A BCNF não permite isso — todos os determinantes precisam ser chaves.

Exemplo:

| Professor | Curso | Sala |
| --------- | ----- | ---- |
| João      | BD    | 101  |
| João      | POO   | 101  |
| Carla     | IA    | 102  |

Se:
- Professor determina a Sala (cada professor só usa uma sala)
- Mas (Professor, Curso) é a chave primária

Então há violação da BCNF, pois Professor é determinantes, mas não é chave candidata.

#### Solução (BCNF):

**Tabela: Professor_Sala**

|Professor|Sala|
|---|---|
|João|101|
|Carla|102|

**Tabela: Professor_Curso**

| Professor | Curso |
| --------- | ----- |
| João      | BD    |
| João      | POO   |
| Carla     | IA    |

___

#### Resumo

##### Comparativo das Formas Normais

| Forma | Requisitos                       | O que ela elimina                                    |
| ----- | -------------------------------- | ---------------------------------------------------- |
| 1NF   | Atributos atômicos               | Grupos repetidos                                     |
| 2NF   | 1NF + sem dependência parcial    | Redundâncias por chave composta                      |
| 3NF   | 2NF + sem dependência transitiva | Atributos não-chave que dependem de outros não-chave |
| BCNF  | 3NF + toda determinante é chave  | Todas as anomalias por determinantes não-chave       |

