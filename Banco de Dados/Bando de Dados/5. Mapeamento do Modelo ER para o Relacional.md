
#### Sobre

O modelo ER é um modelo conceitual usado para projetar banco de dados de forma abstrata. Você pode ver mais em [[3. Modelo Entidade-Relacionamento]].

Já o modelo relacional é um modelo lógico que descreve os dados em forma de tabelas (relacionamentos) que podem ser implementadas diretamente. Você pode ver mais em [[4. Modelo Relaional]].

A transformação serve para tornar o modelo ER implementável em um SGBD relacional.

Ao implementarmos o projeto lógico no SGDB teremos garantidas algumas restrições que devem ser impostas aos dados. Como por exemplo: domínio, chave e integridade referencial (chave estrangeira).

---

#### Mapeamento de Entidades

##### Entidades fortes

Para cada tipo entidade forte em um MER é criada uma tabela no modelo Relacional. Essa tabela inclui todos os atributos simples, e os componentes simples dos atributos compostos, do tipo entidade forte.

Um atributo chave da entidade é escolhido como chave primária para a tabela recém-criada.

Exemplo:

<img src = "../Imagens/MERR1.png" width ="500" >

```sql
CREATE TABLE Aluno (
	Matricula INT PRIMARY KEY,
	Nome VARCHAR(100),
	Curso VARCHAR(50)
);
```


##### Entidades fracas

Entidades fracas não têm chave própria e dependem de uma entidade forte. A tabela gerada para uma entidade fraca deve:

- Conter atributos próprios
- Incluir a chave primária da entidade forte
- Ter a chave estrangeria referenciando a uma entidade forte

Exemplo:

<img src = "../Imagens/MERR2.png" width ="500" >

```sql
CREATE TABLE Dependente (
	ID_Cliente INT,
	Nome_Dep VARCHAR(100),
	Parentesco VARCHAR(50),
	PRIMARY KEY (ID_Cliente, Nome_DEP),
	FOREIGN KEY (ID_Cliente) REFERENCES Cliente(ID_Cliente)
);
```

---

#### Mapeamento de Relacionamentos

##### Relacionamento 1:1 (um para um)

- Pode-se colocar a chave estrangeira de uma entidade na tabela da outra
- Se for obrigatório de ambos os lados, tanto faz o lado escolhido
- Se for opcional de um lado, coloca-se no lado opcional

<img src = "../Imagens/MERR3.png" width ="500" >

```sql
CREATE TABLE Pessoa (
	ID_Pessoa INT PRIMARY KEY,
	Nome VARCHAR(100),
	Num_Passaporte INT UNIQUE,
	FOREIGN KEY (Num_Passaporte) REFERENCES 
	Passaporte(Num_Passaporte)
);
```



##### Relacionamento 1:N (um para muitos)

- A chave primária da entidade do lado 1 é adicionada como chave estrangeira na entidade do lado N

Exemplo:

<img src = "../Imagens/MERR4.png" width ="500" >

```sql
CREATE TABLE Empregado (
	ID_Empregado INT PRIMARY KEY,
	Nome VARCHAR(100),
	Cod_Depto INT,
	FOREIGN KEU (Cod_Depto) REFERENCES 
	Departamento(Cod_Depto)
);
```



##### Relacionamento N:N (muitos para muitos)

- Cria-se uma nova tabela para representar o relacionamento
- Essa tabela contém:
	- As chaves primárias de ambas as entidades como chave composta
	- Eventuais atributos do relacionamento

Exemplo:
<img src = "../Imagens/MERR5.png" width ="500" >

```sql
CREATE TABLE Matricula_Em (
	Matricula INT, 
	Cod_Disciplina INT,
	Ano INT,
	PRIMARY KEY (Matricula, Cod_Disciplina),
	FOREIGN KEY (Matricula) REFERENCES Aluno(Matricula),
	FOREIGN KEY (Cod_Disciplina) REFERENCES  
	Disciplina(Cod_Disciplina)
);
```

---

#### Mapeamento de Atributos 

##### Atributos Compostos

Para atributos compostos, eles são divididos em seus componentes e cada componente vira uma coluna.

Exemplo:
<img src = "../Imagens/MERR6.png" width ="400" >

```sql
CREATE TABLE Cliente (
	ID_Cliente INT PRIMARY KEY,
	Rua VARCHAR(100),
	Numero VARCHAR(10),
	Cidade VARCHAR(50),
);
```



##### Atributos multivalorados

- Atributos que podem ter múltiplos valores precisam de uma nova tabela
- A nova tabela tem:
	- O atributo multivalorado
	- A chave primária da entidade original como chave estrangeira

Exemplo:

<img src = "../Imagens/MERR6.png" width ="400" >

```sql
CREATE TABLE Telefone_Professor (
	ID_Prof INT,
	Telefone VARCHAR(10),
	PRIMARY KEY (ID_Prof, Telefone),
	FOREIGN KEY (ID_Prof) REFERENCES Professor(ID_Prof)
);
```

